{% load static %}
<style>
    header,
    main,
    footer {
        padding-left: 250px;
    }

    #slide-out {
        margin-top: 64.5px;
        z-index: 100;
    }

    @media only screen and (max-width : 992px) {

        header,
        main,
        footer {
            padding-left: 0;
            margin-top: 50px;
        }

        #slide-out {
            margin-top: 56px;
        }
    }

    .imagen::placeholder {
        color: grey;
    }
</style>
<ul id="slide-out" class="sidenav sidenav-fixed" style="max-width: 250px;">
    <div class="container-fluid" style="text-align: center;">
        {% if user.imagen %}
        <img src="{{user.imagen.url}}" width="200" height="200" class="circle"
            style="margin-top: 20px; max-height: 200px;">
        {% else %}
        <img src="{% static 'img/perfil.png' %}" class="responsive-img circle"
            style="margin-top: 20px; max-height: 200px;">
        {% endif %}

        {% if titulo == 'Perfil de usuario' %}
        <form method="POST" id="fileinfo" enctype="multipart/form-data">{% csrf_token %}
            {{form.campo}}
            <div class="file-field input-field" style="margin-top: -3px;">
                <a>
                    <span class="material-icons">add_a_photo</span>
                    {{form.foto}}
                    <!--<input type="file" id='file-imagen'>-->
                </a>
                <div class="file-path-wrapper">
                    <input id="txt-imagen" onchange="activarGuardar()" class="file-path validate imagen"
                        placeholder="Cambiar imagen" type="text"
                        style="border-bottom:0px; margin-bottom: -16px; margin-top: -15px;">
                </div>
            </div>
            <button id="btn-guardari" class="btn grey dareken-4" style="display: none;">Guardar</button>
        </form>
        {% endif %}

        {% if not titulo == 'Mis proyectos' %}
        <li class="divider" style="margin-top: 20px;"></li>
        <li><a href="/misProyectos" class="black-text">Mis Proyectos</a></li>
        {% endif %}
        <li class="divider"></li>
        <li><a href="#!" class="black-text">Crear Proyecto</a></li>
        <li class="divider"></li>
        <li><a href="#!" class="black-text">Freelancers Contratados</a></li>
        <li class="divider"></li>
        <li><a href="#!" class="black-text">Solicitudes de Freelancers</a></li>
        <li class="divider"></li>
    </div>
    <br><br><br>
</ul>

<script type="text/javascript">
    //Funcion que detecta los cambios en el textbox que describe la imagen
    function activarGuardar() {
        let btnGuardar = document.getElementById('btn-guardari');
        let txtImagen = document.getElementById('txt-imagen');
        if (txtImagen.value.length == 0) {
            btnGuardar.style.display = 'none';
        } else {
            btnGuardar.style.display = 'inline-flex'
        }
    }
    var imagenActual = '{{user.imagen}}';
</script>
<script src="{% static 'js/cargarImagenPerfil.js'%}"></script>